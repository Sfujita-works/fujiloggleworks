<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>簡易見積りシミュレーター</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', 'Hiragino Sans', sans-serif;
background: linear-gradient(135deg, #fef5f1 0%, #f5e6dc 100%);
padding: 20px;
line-height: 1.6;
}

.container {
max-width: 900px;
margin: 0 auto;
background: white;
border-radius: 16px;
box-shadow: 0 10px 40px rgba(0,0,0,0.1);
overflow: hidden;
}

header {
background: linear-gradient(135deg, #E08450 0%, #D8692E 100%);
color: white;
padding: 40px 30px;
text-align: center;
}

header h1 {
font-size: 20px !important;
margin-bottom: 10px;
}

header p {
font-size: 14px;
opacity: 0.9;
}

.content {
padding: 40px 30px;
}

.accordion-section {
margin-bottom: 20px;
border: 2px solid #e9ecef;
border-radius: 10px;
overflow: hidden;
}

.accordion-header {
background: #f8f9fa;
padding: 20px;
cursor: pointer;
display: flex;
justify-content: space-between;
align-items: center;
transition: all 0.3s ease;
user-select: none;
}

.accordion-header:hover {
background: #e9ecef;
}

.accordion-header.active {
background: #fff5f0;
border-bottom: 2px solid #D8692E;
}

.accordion-title {
font-size: 18px;
font-weight: 600;
color: #333;
}

.accordion-subtitle {
font-size: 12px;
color: #666;
margin-top: 5px;
font-weight: normal;
}

.accordion-status {
display: flex;
align-items: center;
gap: 10px;
font-size: 14px;
color: #666;
}

.status-badge {
padding: 4px 12px;
border-radius: 20px;
font-size: 12px;
font-weight: 600;
}

.status-unselected {
background: #e9ecef;
color: #666;
}

.status-selected {
background: #d4edda;
color: #155724;
}

.accordion-icon {
font-size: 20px;
color: #D8692E;
transition: all 0.3s ease;
}

.accordion-content {
max-height: 0;
overflow: hidden;
transition: max-height 0.3s ease;
}

.accordion-content.active {
max-height: 4000px;
}

.accordion-inner {
padding: 20px;
}

.option-group {
display: grid;
gap: 15px;
}

.option {
background: #f8f9fa;
border: 2px solid #e9ecef;
border-radius: 10px;
padding: 20px;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: flex-start;
gap: 15px;
}

.option:hover {
border-color: #D8692E;
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(216, 105, 46, 0.15);
}

.option.selected {
border-color: #D8692E;
background: #fff5f0;
}

.option.unselected {
opacity: 0.5;
}

.option input[type="radio"],
.option input[type="checkbox"] {
width: 20px;
height: 20px;
margin-top: 3px;
cursor: pointer;
accent-color: #D8692E;
}

.option-details {
flex: 1;
}

.option-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 8px;
}

.option-name {
font-weight: 600;
font-size: 16px;
color: #333;
}

.option-price {
font-weight: 700;
font-size: 18px;
color: #D8692E;
}

.option-price-old {
text-decoration: line-through;
color: #999;
font-size: 14px;
margin-right: 8px;
}

.option-desc {
font-size: 13px;
color: #666;
line-height: 1.5;
}

.discount-badge {
display: inline-block;
background: #ff6b6b;
color: white;
padding: 4px 10px;
border-radius: 20px;
font-size: 12px;
font-weight: 600;
margin-left: 10px;
}

.option.design-bamboo {
background: #EBEDED;
}

.option.design-sakura {
background: #fff0f5;
}

.category-title {
font-size: 16px;
color: #D8692E;
font-weight: 600;
margin-top: 25px;
margin-bottom: 12px;
padding-left: 10px;
border-left: 3px solid #D8692E;
}

.page-count-selector {
display: flex;
align-items: center;
gap: 10px;
margin-top: 10px;
padding: 10px;
background: rgba(216, 105, 46, 0.05);
border-radius: 8px;
}

.page-count-selector label {
font-size: 13px;
color: #666;
font-weight: 600;
}

.page-count-selector select {
padding: 5px 10px;
border: 2px solid #D8692E;
border-radius: 5px;
font-size: 14px;
color: #333;
background: white;
cursor: pointer;
}

.alert-message {
background: #fff3cd;
border-left: 4px solid #ffc107;
padding: 15px;
margin: 15px 0;
border-radius: 4px;
font-size: 14px;
color: #856404;
display: none;
animation: slideDown 0.3s ease;
}

.alert-message.show {
display: block;
}

.alert-message.recommend {
background: #d1ecf1;
border-left-color: #0c5460;
color: #0c5460;
}

@keyframes slideDown {
from {
opacity: 0;
transform: translateY(-10px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

.summary {
background: #556E98;
color: white;
padding: 30px;
border-radius: 12px;
margin-top: 40px;
position: sticky;
top: 20px;
}

.summary-title {
font-size: 20px;
margin-bottom: 20px;
text-align: center;
}

.summary-selected-items {
background: rgba(255,255,255,0.1);
border-radius: 8px;
padding: 15px;
margin-bottom: 20px;
font-size: 13px;
}

.summary-selected-item {
margin-bottom: 8px;
padding: 5px 0;
border-bottom: 1px solid rgba(255,255,255,0.1);
}

.summary-selected-item:last-child {
border-bottom: none;
}

.summary-total {
border-top: 2px solid rgba(255,255,255,0.3);
padding-top: 20px;
display: flex;
justify-content: space-between;
align-items: center;
}

.total-label {
font-size: 18px;
font-weight: 600;
}

.total-amount {
font-size: 32px;
font-weight: 700;
}

.note {
background: #fff3cd;
border-left: 4px solid #ffc107;
padding: 15px;
margin-top: 30px;
border-radius: 4px;
font-size: 13px;
color: #856404;
}

.contact-button {
display: inline-block;
background-color: #D8692E;
color: white;
padding: 15px 40px;
border-radius: 8px;
text-decoration: none;
font-size: 16px;
font-weight: 600;
transition: all 0.3s ease;
border: 2px solid transparent;
}

.contact-button:hover {
background-color: white;
color: #556E98;
border: 2px solid #556E98;
}

@media (max-width: 768px) {
.content {
padding: 30px 20px;
}

header h1 {
font-size: 18px !important;
}

.option {
flex-direction: column;
align-items: flex-start;
}

.option input[type="radio"],
.option input[type="checkbox"] {
margin-bottom: 10px;
}

.option-header {
flex-direction: column;
align-items: flex-start;
gap: 5px;
}

.summary {
position: relative;
top: 0;
}
}
</style>
</head>
<body>
<div class="container">
<header>
<h1>ホームページ制作 簡易見積りシミュレーター</h1>
<p>ご希望のプランやオプションを選択すると、概算見積りが表示されます</p>
</header>

<div class="content">
<!-- ステップ1: コース選択 -->
<div class="accordion-section">
<div class="accordion-header active" onclick="toggleAccordion(this)">
<div>
<div class="accordion-title">ステップ1: コース選択</div>
</div>
<div class="accordion-status">
<span class="status-badge status-unselected" id="course-status">未選択</span>
<span class="accordion-icon">▼</span>
</div>
</div>
<div class="accordion-content active">
<div class="accordion-inner">
<div class="option-group">
<label class="option">
<input type="radio" name="course" value="60000" data-name="フルコース" onchange="handleCourseChange()">
<div class="option-details">
<div class="option-header">
<span class="option-name">フルコース</span>
<div>
<span class="option-price-old">¥68,000</span>
<span class="option-price">¥60,000</span>
<span class="discount-badge">¥8,000お得!</span>
</div>
</div>
<div class="option-desc">全ての機能を盛り込んだプランです（トップページ、サービスページ、会社案内、プライバシーポリシー、お問い合わせ、ブログ、ギャラリー、FAQ、採用・募集、予約機能）</div>
</div>
</label>

<label class="option">
<input type="radio" name="course" value="30000" data-name="基本コース" onchange="handleCourseChange()">
<div class="option-details">
<div class="option-header">
<span class="option-name">基本コース</span>
<span class="option-price">¥30,000</span>
</div>
<div class="option-desc">必要最小限から始めるプランです（トップページ、サービスページ、会社案内、プライバシーポリシー、お問い合わせ、ブログ）</div>
</div>
</label>
</div>
</div>
</div>
</div>

<!-- ステップ2: +チョイス（ページ追加） -->
<div class="accordion-section" id="step2Section" style="display: none;">
<div class="accordion-header" onclick="toggleAccordion(this)">
<div>
<div class="accordion-title">ステップ2: +チョイス（ページ追加）</div>
<div class="accordion-subtitle">基本コースを選んだ方は、ページを追加することができます</div>
</div>
<div class="accordion-status">
<span class="status-badge status-unselected" id="choice-status">未選択</span>
<span class="accordion-icon">▶</span>
</div>
</div>
<div class="accordion-content">
<div class="accordion-inner">
<div id="choiceAlert" class="alert-message"></div>
<div class="option-group">
<label class="option">
<input type="checkbox" name="page-choice" value="7000" data-name="ギャラリー" onchange="updatePageChoice()">
<div class="option-details">
<div class="option-header">
<span class="option-name">ギャラリー</span>
<span class="option-price">+¥7,000</span>
</div>
<div class="option-desc">画像ギャラリーページを追加</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="page-choice" value="7000" data-name="FAQ よくある質問" onchange="updatePageChoice()">
<div class="option-details">
<div class="option-header">
<span class="option-name">FAQ よくある質問</span>
<span class="option-price">+¥7,000</span>
</div>
<div class="option-desc">よくある質問ページを追加</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="page-choice" value="12000" data-name="採用・募集" onchange="updatePageChoice()">
<div class="option-details">
<div class="option-header">
<span class="option-name">採用・募集</span>
<span class="option-price">+¥12,000</span>
</div>
<div class="option-desc">採用・募集情報ページを追加</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="page-choice" value="12000" data-name="予約機能" onchange="updatePageChoice()">
<div class="option-details">
<div class="option-header">
<span class="option-name">予約機能</span>
<span class="option-price">+¥12,000</span>
</div>
<div class="option-desc">予約機能を追加</div>
</div>
</label>
</div>
</div>
</div>
</div>

<!-- ステップ3: デザインイメージ選択 -->
<div class="accordion-section">
<div class="accordion-header" onclick="toggleAccordion(this)">
<div>
<div class="accordion-title">ステップ3: デザインイメージ選択</div>
</div>
<div class="accordion-status">
<span class="status-badge status-unselected" id="design-status">未選択</span>
<span class="accordion-icon">▶</span>
</div>
</div>
<div class="accordion-content">
<div class="accordion-inner">
<div class="option-group">
<label class="option design-bamboo">
<input type="radio" name="design" value="0" data-name="竹デザイン" onchange="handleDesignChange()">
<div class="option-details">
<div class="option-header">
<span class="option-name">竹（Bamboo）デザイン</span>
<span class="option-price">追加料金なし</span>
</div>
<div class="option-desc">シンプルで洗練されたデザイン。ビジネス向け、士業、コンサル、IT企業など幅広い業種に対応</div>
</div>
</label>

<label class="option design-sakura">
<input type="radio" name="design" value="0" data-name="桜デザイン" onchange="handleDesignChange()">
<div class="option-details">
<div class="option-header">
<span class="option-name">桜（Sakura）デザイン</span>
<span class="option-price">追加料金なし</span>
</div>
<div class="option-desc">柔らかく華やかなデザイン。美容、健康、教育、サービス業などに最適</div>
</div>
</label>
</div>
</div>
</div>
</div>

<!-- ステップ4: 追加オプション -->
<div class="accordion-section">
<div class="accordion-header" onclick="toggleAccordion(this)">
<div>
<div class="accordion-title">ステップ4: 追加オプション</div>
</div>
<div class="accordion-status">
<span class="status-badge status-unselected" id="option-status">未選択</span>
<span class="accordion-icon">▶</span>
</div>
</div>
<div class="accordion-content">
<div class="accordion-inner">
<h3 class="category-title">ブランド・ビジュアルAI制作</h3>
<div class="option-group">
<label class="option">
<input type="checkbox" name="option" value="5000" data-name="ファビコン・ロゴ制作" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">ファビコン・ロゴ制作</span>
<span class="option-price">+¥5,000/5案</span>
</div>
<div class="option-desc">ブランドの象徴となるミニマルロゴを5案制作</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="option" value="5000" data-name="キャラクター制作" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">キャラクター制作</span>
<span class="option-price">+¥5,000/5枚</span>
</div>
<div class="option-desc">SNSなどで使用できるキャラクター提案（5枚セット）</div>
</div>
</label>
</div>

<h3 class="category-title">デジタルマーケティングサポート</h3>
<div class="option-group">
<label class="option">
<input type="checkbox" name="option" value="5000" data-name="SNSリール作成サポート" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">SNSリール作成サポート</span>
<span class="option-price">+¥5,000/1本</span>
</div>
<div class="option-desc">静止画×テキストで手軽に伝わるリール動画を制作（15〜30秒）</div>
</div>
</label>
</div>

<h3 class="category-title">コンテンツ運用・拡張</h3>
<div class="option-group">
<label class="option">
<input type="checkbox" name="option" value="10000" data-name="コンテンツ制作サポート（基本ページ）" data-pages="1" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">コンテンツ制作サポート（基本ページ）</span>
<span class="option-price" id="price-content-basic">+¥10,000~/1ページ分</span>
</div>
<div class="option-desc">ヒアリング後、サイトに適した文章や画像構成をご提案</div>
<div class="page-count-selector">
<label for="pages-content-basic">ページ数:</label>
<select id="pages-content-basic" onchange="updatePageCount('コンテンツ制作サポート（基本ページ）', this.value, 10000)">
<option value="1">1ページ</option>
<option value="2">2ページ</option>
<option value="3">3ページ</option>
<option value="4">4ページ</option>
<option value="5">5ページ</option>
<option value="6">6ページ</option>
<option value="7">7ページ</option>
<option value="8">8ページ</option>
<option value="9">9ページ</option>
<option value="10">10ページ</option>
</select>
</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="option" value="15000" data-name="コンテンツ制作サポート（カスタムページ）" data-pages="1" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">コンテンツ制作サポート（カスタムページ）</span>
<span class="option-price" id="price-content-custom">+¥15,000~/1ページ分</span>
</div>
<div class="option-desc">既存ページや新規ページに追加するカスタム構成のコンテンツ制作</div>
<div class="page-count-selector">
<label for="pages-content-custom">ページ数:</label>
<select id="pages-content-custom" onchange="updatePageCount('コンテンツ制作サポート（カスタムページ）', this.value, 15000)">
<option value="1">1ページ</option>
<option value="2">2ページ</option>
<option value="3">3ページ</option>
<option value="4">4ページ</option>
<option value="5">5ページ</option>
<option value="6">6ページ</option>
<option value="7">7ページ</option>
<option value="8">8ページ</option>
<option value="9">9ページ</option>
<option value="10">10ページ</option>
</select>
</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="option" value="7000" data-name="ページ修正・追加（基本コース同様）" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">ページ修正・追加（基本コース同様）</span>
<span class="option-price">+¥7,000~/1ページ</span>
</div>
<div class="option-desc">テキスト・画像の差し替え、基本コースと同構成のページ増設</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="option" value="12000" data-name="ページ修正・追加（新規カスタム）" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">ページ修正・追加（新規カスタム）</span>
<span class="option-price">+¥12,000~/1ページ</span>
</div>
<div class="option-desc">新規のカスタムページ増設</div>
</div>
</label>
</div>

<h3 class="category-title">導入サポート</h3>
<div class="option-group">
<label class="option">
<input type="checkbox" name="option" value="10000" data-name="サーバー導入" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">サーバー導入</span>
<span class="option-price">+¥10,000~/1サーバー・1ドメイン</span>
</div>
<div class="option-desc">契約代行、ネームサーバー設定、SSL設定、WordPress初期構築まで一括対応</div>
</div>
</label>
</div>

<h3 class="category-title">学習・継続サポート</h3>
<div class="option-group">
<label class="option">
<input type="checkbox" name="option" value="10000" data-name="マニュアル提供（簡易編）" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">マニュアル提供（簡易編）</span>
<span class="option-price">+¥10,000/1サイト</span>
</div>
<div class="option-desc">管理画面の入り方、ログイン方法、ブログ投稿と固定ページの書き方など</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="option" value="15000" data-name="マニュアル提供＋研修（簡易編）" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">マニュアル提供＋研修（簡易編）</span>
<span class="option-price">+¥15,000/1サイト</span>
</div>
<div class="option-desc">簡易版マニュアル通りの操作手順をビデオ会議で研修（約1〜1.5時間）</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="option" value="25000" data-name="マニュアル提供（本格編）" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">マニュアル提供（本格編）</span>
<span class="option-price">+¥25,000/1サイト</span>
</div>
<div class="option-desc">簡易版＋サイト構成・管理画面の基本項目の解説、WordPressの主要操作の解説など</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="option" value="35000" data-name="マニュアル提供＋研修（本格編）" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">マニュアル提供＋研修（本格編）</span>
<span class="option-price">+¥35,000/1サイト</span>
</div>
<div class="option-desc">本格版マニュアル通りの操作手順をビデオ会議で研修（約2時間）</div>
</div>
</label>
</div>

<h3 class="category-title">技術・保守サポート（月額）</h3>
<div class="option-group">
<label class="option">
<input type="checkbox" name="option" value="10000" data-name="ライト保守" data-monthly="true" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">ライト保守</span>
<span class="option-price">+¥10,000~/1サイト/月額</span>
</div>
<div class="option-desc">WordPress更新、プラグイン修正・バックアップ（月1回）、不具合察知等一報など</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="option" value="8000" data-name="コンテンツ保守" data-monthly="true" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">コンテンツ保守</span>
<span class="option-price">+¥8,000~/1サイト/月額</span>
</div>
<div class="option-desc">テキストや画像の軽微な修正、SEO再設定などを月次対応</div>
</div>
</label>

<label class="option">
<input type="checkbox" name="option" value="3000" data-name="セキュリティ対策・運用" data-monthly="true" onchange="updateSummary()">
<div class="option-details">
<div class="option-header">
<span class="option-name">セキュリティ対策・運用</span>
<span class="option-price">+¥3,000~/1サイト/月額</span>
</div>
<div class="option-desc">reCAPTCHA導入・スパム防止設定などを実施</div>
</div>
</label>
</div>
</div>
</div>
</div>

<!-- 見積り結果 -->
<div class="summary">
<h3 class="summary-title">お見積り</h3>
<div class="summary-selected-items" id="selectedSummary">
<div style="text-align: center; color: rgba(255,255,255,0.7);">コースを選択してください</div>
</div>
<div class="summary-total">
<span class="total-label">初回合計金額</span>
<span class="total-amount" id="totalAmount">¥0</span>
</div>
</div>

<div class="note">
<strong>ご注意：</strong><br>
・この見積りは目安です。詳細なお見積りは、お問い合わせフォームよりご相談ください。<br>
・月額サービスは初月のみの計算です。<br>
・このシミュレーターには保存機能がありません。ウィンドウを閉じると見積もり結果は消えますので、必要に応じてスクリーンショットを保存してください。
</div>

<div style="text-align: center; margin-top: 30px;">
<a href="https://portfolio.fujiloggle.com/apply-contact/" class="contact-button" target="_blank" rel="noopener noreferrer">
お問い合わせ
</a>
</div>
</div>
</div>

<script>
let isFullCourseRecommended = false;

function toggleAccordion(header) {
const content = header.nextElementSibling;
const icon = header.querySelector('.accordion-icon');
header.classList.toggle('active');
content.classList.toggle('active');
icon.textContent = content.classList.contains('active') ? '▼' : '▶';
}

function updatePageCount(itemName, pages, basePrice) {
const checkbox = document.querySelector(`input[name="option"][data-name="${itemName}"]`);
if (checkbox) {
checkbox.setAttribute('data-pages', pages);
checkbox.value = basePrice * parseInt(pages);
const priceElement = document.getElementById(itemName === 'コンテンツ制作サポート（基本ページ）' ? 'price-content-basic' : 'price-content-custom');
if (priceElement) {
priceElement.textContent = '+¥' + (basePrice * parseInt(pages)).toLocaleString() + '~/' + pages + 'ページ分';
}
updateSummary();
}
}

function updatePageChoice() {
const basicCourse = document.querySelector('input[name="course"][value="30000"]');
const choiceAlert = document.getElementById('choiceAlert');
const choiceStatus = document.getElementById('choice-status');

if (basicCourse && basicCourse.checked) {
let pageChoiceTotal = 0;
const checkedPages = document.querySelectorAll('input[name="page-choice"]:checked');
checkedPages.forEach(checkbox => {
pageChoiceTotal += parseInt(checkbox.value);
});

const totalWithBasic = 30000 + pageChoiceTotal;
const allPageOptions = document.querySelectorAll('input[name="page-choice"]');
const allChecked = Array.from(allPageOptions).every(option => option.checked);

// ステータス更新
if (checkedPages.length > 0) {
choiceStatus.textContent = `${checkedPages.length}件選択中`;
choiceStatus.classList.remove('status-unselected');
choiceStatus.classList.add('status-selected');
} else {
choiceStatus.textContent = '未選択';
choiceStatus.classList.remove('status-selected');
choiceStatus.classList.add('status-unselected');
}

if (allChecked) {
choiceAlert.className = 'alert-message recommend show';
choiceAlert.innerHTML = '<strong>💡 フルコースがお得です!</strong><br>全てのページを選択されています。基本コース+全オプション（¥68,000）より、フルコース（¥60,000）の方が<strong>¥8,000お得</strong>です。ステップ1に戻ってフルコースをご検討ください。';
isFullCourseRecommended = true;
} else if (totalWithBasic >= 61000) {
choiceAlert.className = 'alert-message recommend show';
choiceAlert.innerHTML = '<strong>💡 フルコースをご検討ください</strong><br>現在の選択（基本コース+オプション）は<strong>¥' + totalWithBasic.toLocaleString() + '</strong>です。フルコース（¥60,000）の方がお得になります。';
isFullCourseRecommended = true;
} else {
choiceAlert.className = 'alert-message';
isFullCourseRecommended = false;
}
} else {
isFullCourseRecommended = false;
}

updateSummary();
}

function updateSummary() {
let totalOnetime = 0;
let totalMonthly = 0;
const selectedItemsOnetime = {};
const selectedItemsMonthly = {};

const selectedCourse = document.querySelector('input[name="course"]:checked');
if (selectedCourse) {
const price = parseInt(selectedCourse.value);
const name = selectedCourse.dataset.name;
const isBasicCourse = selectedCourse.value === '30000';

if (isBasicCourse && isFullCourseRecommended) {
const checkedPages = document.querySelectorAll('input[name="page-choice"]:checked');
const allPageOptions = document.querySelectorAll('input[name="page-choice"]');
const allChecked = Array.from(allPageOptions).every(option => option.checked);

if (allChecked) {
selectedItemsOnetime['フルコース（推奨）'] = 60000;
} else {
selectedItemsOnetime[name] = price;
checkedPages.forEach(checkbox => {
selectedItemsOnetime[checkbox.dataset.name] = parseInt(checkbox.value);
});
}
} else if (isBasicCourse) {
selectedItemsOnetime[name] = price;
const checkedPages = document.querySelectorAll('input[name="page-choice"]:checked');
checkedPages.forEach(checkbox => {
selectedItemsOnetime[checkbox.dataset.name] = parseInt(checkbox.value);
});
} else {
selectedItemsOnetime[name] = price;
}
}

document.querySelectorAll('input[name="option"]:checked').forEach(checkbox => {
const price = parseInt(checkbox.value);
const name = checkbox.dataset.name;
const isMonthly = checkbox.dataset.monthly === 'true';
const pages = checkbox.getAttribute('data-pages');

let displayName = name;
if (pages && parseInt(pages) > 1) {
displayName = name + ' (×' + pages + 'ページ)';
}

if (isMonthly) {
selectedItemsMonthly[displayName] = price;
} else {
selectedItemsOnetime[displayName] = price;
}
});

for (const price of Object.values(selectedItemsOnetime)) {
totalOnetime += price;
}
for (const price of Object.values(selectedItemsMonthly)) {
totalMonthly += price;
}

document.getElementById('totalAmount').textContent = '¥' + (totalOnetime + totalMonthly).toLocaleString();

let summaryHTML = '';
if (Object.keys(selectedItemsOnetime).length > 0 || Object.keys(selectedItemsMonthly).length > 0) {
for (const [name, price] of Object.entries(selectedItemsOnetime)) {
summaryHTML += `<div class="summary-selected-item"><label style="display: flex; align-items: center; cursor: pointer; width: 100%;"><input type="checkbox" checked onchange="removeItem('${name.replace(/'/g, "\\'")}', 'onetime')" style="margin-right: 10px;"><span style="flex: 1;">${name}</span><span style="font-weight: 600;">¥${price.toLocaleString()}</span></label></div>`;
}
for (const [name, price] of Object.entries(selectedItemsMonthly)) {
summaryHTML += `<div class="summary-selected-item"><label style="display: flex; align-items: center; cursor: pointer; width: 100%;"><input type="checkbox" checked onchange="removeItem('${name.replace(/'/g, "\\'")}', 'monthly')" style="margin-right: 10px;"><span style="flex: 1;">${name}（月額）</span><span style="font-weight: 600;">¥${price.toLocaleString()}</span></label></div>`;
}
} else {
summaryHTML = '<div style="text-align: center; color: rgba(255,255,255,0.7);">コースを選択してください</div>';
}
document.getElementById('selectedSummary').innerHTML = summaryHTML;
}

function removeItem(name, type) {
// ページ数表示が含まれている場合、元の名前に戻す
let originalName = name.replace(/ \(×\d+ページ\)/, '');

const courseRadio = document.querySelector(`input[name="course"][data-name="${originalName}"]`);
if (courseRadio) {
courseRadio.checked = false;
courseRadio.closest('.option').classList.remove('selected');
courseRadio.closest('.option').classList.add('unselected');
document.getElementById('course-status').textContent = '未選択';
document.getElementById('course-status').classList.remove('status-selected');
document.getElementById('course-status').classList.add('status-unselected');
document.getElementById('step2Section').style.display = 'none';
document.querySelectorAll('input[name="page-choice"]').forEach(cb => {
cb.checked = false;
cb.closest('.option').classList.remove('selected');
});
document.getElementById('choice-status').textContent = '未選択';
document.getElementById('choice-status').classList.remove('status-selected');
document.getElementById('choice-status').classList.add('status-unselected');
}

const pageChoice = document.querySelector(`input[name="page-choice"][data-name="${originalName}"]`);
if (pageChoice) {
pageChoice.checked = false;
pageChoice.closest('.option').classList.remove('selected');
updatePageChoice();
}

const optionCheckbox = document.querySelector(`input[name="option"][data-name="${originalName}"]`);
if (optionCheckbox) {
optionCheckbox.checked = false;
optionCheckbox.closest('.option').classList.remove('selected');
// ページ数セレクタをリセット
if (originalName.includes('コンテンツ制作サポート')) {
const selectId = originalName.includes('基本ページ') ? 'pages-content-basic' : 'pages-content-custom';
document.getElementById(selectId).value = '1';
optionCheckbox.setAttribute('data-pages', '1');
if (originalName.includes('基本ページ')) {
optionCheckbox.value = '10000';
document.getElementById('price-content-basic').textContent = '+¥10,000~/1ページ分';
} else {
optionCheckbox.value = '15000';
document.getElementById('price-content-custom').textContent = '+¥15,000~/1ページ分';
}
}

const checkedCount = document.querySelectorAll('input[name="option"]:checked').length;
const statusBadge = document.getElementById('option-status');
if (checkedCount > 0) {
statusBadge.textContent = `${checkedCount}件選択中`;
} else {
statusBadge.textContent = '未選択';
statusBadge.classList.remove('status-selected');
statusBadge.classList.add('status-unselected');
}
}

updateSummary();
}

function handleCourseChange() {
const statusBadge = document.getElementById('course-status');
const selectedCourse = document.querySelector('input[name="course"]:checked');
const step2Section = document.getElementById('step2Section');
const choiceStatus = document.getElementById('choice-status');

statusBadge.textContent = '選択済み：' + selectedCourse.dataset.name;
statusBadge.classList.remove('status-unselected');
statusBadge.classList.add('status-selected');

document.querySelectorAll('input[name="course"]').forEach(r => {
const option = r.closest('.option');
if (r.checked) {
option.classList.add('selected');
option.classList.remove('unselected');
} else {
option.classList.remove('selected');
option.classList.add('unselected');
}
});

if (selectedCourse.value === '30000') {
step2Section.style.display = 'block';
} else {
step2Section.style.display = 'none';
document.querySelectorAll('input[name="page-choice"]').forEach(cb => {
cb.checked = false;
cb.closest('.option').classList.remove('selected');
});
choiceStatus.textContent = '未選択';
choiceStatus.classList.remove('status-selected');
choiceStatus.classList.add('status-unselected');
}

updatePageChoice();
}

function handleDesignChange() {
const statusBadge = document.getElementById('design-status');
const selectedDesign = document.querySelector('input[name="design"]:checked');
statusBadge.textContent = '選択済み：' + selectedDesign.dataset.name;
statusBadge.classList.remove('status-unselected');
statusBadge.classList.add('status-selected');

document.querySelectorAll('input[name="design"]').forEach(r => {
const option = r.closest('.option');
if (r.checked) {
option.classList.add('selected');
} else {
option.classList.remove('selected');
}
});
}

document.querySelectorAll('input[name="option"]').forEach(checkbox => {
checkbox.addEventListener('change', function() {
const checkedCount = document.querySelectorAll('input[name="option"]:checked').length;
const statusBadge = document.getElementById('option-status');

if (checkedCount > 0) {
statusBadge.textContent = `${checkedCount}件選択中`;
statusBadge.classList.remove('status-unselected');
statusBadge.classList.add('status-selected');
} else {
statusBadge.textContent = '未選択';
statusBadge.classList.remove('status-selected');
statusBadge.classList.add('status-unselected');
}

const option = this.closest('.option');
if (this.checked) {
option.classList.add('selected');
} else {
option.classList.remove('selected');
}

updateSummary();
});
});

document.querySelectorAll('input[name="page-choice"]').forEach(checkbox => {
checkbox.addEventListener('change', function() {
const option = this.closest('.option');
if (this.checked) {
option.classList.add('selected');
} else {
option.classList.remove('selected');
}
});
});
</script>
</body>
</html>
